{"version":3,"file":"js/Record.vue.6337e0cf.js","mappings":"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","sources":["webpack://vue3/./src/components/Project5/Views/Record.vue","webpack://vue3/./src/components/Project5/Views/Record.vue?d4bc"],"sourcesContent":["<template>\r\n  <div class=\"p-4 record\" v-if=\"categories.length\">\r\n    <div class=\"\">\r\n      <h3>New item</h3>\r\n    </div>\r\n    <hr />\r\n    <form class=\"newItem\" @submit.prevent=\"onSubmit\">\r\n      <div class=\"pb-2\">\r\n        <select id=\"selectCategory\" v-model=\"current\" placeholder=\"Choose category\">\r\n          <option disabled>Categories:</option>\r\n          <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">\r\n            {{ category.categoryName }}\r\n          </option>\r\n        </select>\r\n        <br />\r\n        <label for=\"selectCategory\" class=\"chooseCategory\">Choose the category</label>\r\n      </div>\r\n\r\n      <div class=\"radio pb-2\">\r\n        <label>\r\n          <input class=\"\" v-model=\"type\" name=\"type\" type=\"radio\" value=\"income\" />\r\n          <span class=\"mx-2\">Income</span>\r\n        </label>\r\n        <label>\r\n          <input class=\"\" v-model=\"type\" name=\"type\" type=\"radio\" value=\"outcome\" />\r\n          <span class=\"mx-2\">Expenses</span>\r\n        </label>\r\n      </div>\r\n\r\n      <div class=\"summ\">\r\n        <input id=\"summ\" v-model.number=\"summ\" type=\"number\" placeholder=\"Summ\" />\r\n        <div v-if=\"v$.$invalid\" class=\"text-danger errors\">\r\n          <span class=\"error\" v-for=\"item in v$.$silentErrors\" :key=\"item.uid\">\r\n            <i v-if=\"item.$property === 'summ'\">{{ item.$message }}</i>\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"mt-4 _description\">\r\n        <input\r\n          id=\"description\"\r\n          v-model=\"description\"\r\n          type=\"text\"\r\n          placeholder=\"Description\"\r\n        />\r\n        <div v-if=\"v$.$invalid\" class=\"text-danger errors\">\r\n          <span class=\"error\" v-for=\"item in v$.$silentErrors\" :key=\"item.uid\">\r\n            <i v-if=\"item.$property === 'description'\">{{ item.$message }}</i>\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"mt-4\">\r\n        <button type=\"submit\" class=\"btn btn-success shadow-sm rounded\">\r\n          CREATE <i class=\"bi bi-send float-end ms-2\"></i>\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <p class=\"text-center m-4 p-4 col-xl-12 col-lg-12 col-md-12 col-sm-12 flex-wrap\" v-else>\r\n    You didn't add categories. <router-link to=\"/categories\">Add new</router-link>\r\n  </p>\r\n</template>\r\n<script>\r\nimport { CRMstore } from \"@/stores/CRMstore\";\r\nimport useVuelidate from \"@vuelidate/core\";\r\nimport { required, minLength, between } from \"@vuelidate/validators\";\r\nexport default {\r\n  name: \"record-component\",\r\n  setup() {\r\n    const crmStore = CRMstore();\r\n    return {\r\n      crmStore,\r\n      v$: useVuelidate(),\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      current: {},\r\n      type: \"income\",\r\n      summ: 1,\r\n      description: \"\",\r\n    };\r\n  },\r\n  validations() {\r\n    return {\r\n      summ: {\r\n        required,\r\n        between: between(1, 1000000),\r\n      },\r\n      description: {\r\n        required,\r\n        minLength: minLength(3),\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    if (this.categories.length) {\r\n      this.current = this.categories[0].id;\r\n    }\r\n  },\r\n  computed: {\r\n    userBill() {\r\n      return this.crmStore.GET_USER_BILL;\r\n    },\r\n    categories() {\r\n      return this.crmStore.categories;\r\n    },\r\n    canCreateRecord() {\r\n      if (this.type === \"income\") {\r\n        return true;\r\n      }\r\n      return this.userBill >= this.summ;\r\n    },\r\n  },\r\n  methods: {\r\n    async onSubmit() {\r\n      if (this.v$.$invalid) {\r\n        return;\r\n      }\r\n      if (this.canCreateRecord) {\r\n        const formData = {\r\n          selectedCategoryId: this.current,\r\n          type: this.type,\r\n          summ: this.summ,\r\n          description: this.description,\r\n          date: new Date().toJSON().slice(0, 19),\r\n        };\r\n        try {\r\n          await this.crmStore.createRecord(formData).then((res) => {\r\n            this.$toast.success(`New ${res} has been created!`);\r\n          });\r\n          this.summ = 1;\r\n          this.description = \"\";\r\n          const newBill =\r\n            this.type === \"income\"\r\n              ? this.userBill + this.summ\r\n              : this.userBill - this.summ;\r\n          await this.crmStore.updateUserInfo(newBill);\r\n          this.v$.$reset();\r\n        } catch (error) {\r\n          this.$toast.warning(error.message);\r\n        }\r\n      } else {\r\n        this.$toast.error(`You haven't enough money: -${this.summ - this.userBill}`);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#selectCategory {\r\n  width: 190px;\r\n}\r\n\r\n.chooseCategory {\r\n  font-size: 80%;\r\n  color: blue;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.radio {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 190px;\r\n}\r\n</style>\r\n","import { render } from \"./Record.vue?vue&type=template&id=1060fd95&scoped=true\"\nimport script from \"./Record.vue?vue&type=script&lang=js\"\nexport * from \"./Record.vue?vue&type=script&lang=js\"\n\nimport \"./Record.vue?vue&type=style&index=0&id=1060fd95&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Projects\\\\vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1060fd95\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","disabled","for","type","$options","length","_createElementBlock","_hoisted_2","_hoisted_3","onSubmit","id","$data","$event","placeholder","_hoisted_5","_Fragment","_renderList","category","key","value","categoryName","_hoisted_6","_hoisted_7","_hoisted_8","name","_hoisted_10","_hoisted_11","$setup","$invalid","$silentErrors","item","uid","$property","_hoisted_14","_toDisplayString","$message","_hoisted_17","_hoisted_18","_createVNode","_component_router_link","to","setup","crmStore","CRMstore","v$","useVuelidate","data","current","summ","description","validations","required","between","minLength","mounted","this","categories","computed","userBill","GET_USER_BILL","canCreateRecord","methods","async","formData","selectedCategoryId","date","Date","toJSON","slice","createRecord","then","res","$toast","success","newBill","updateUserInfo","$reset","error","warning","message","__exports__","render"],"sourceRoot":""}