"use strict";(self["webpackChunkvue3"]=self["webpackChunkvue3"]||[]).push([[424],{2536:function(e,t,r){r.r(t),r.d(t,{default:function(){return ee}});var a=r(3396);const o={class:"p-4 categories"},s=(0,a._)("div",{class:""},[(0,a._)("h3",null,"Categories")],-1),i=(0,a._)("hr",null,null,-1),c={class:"row justify-content-evenly"};function l(e,t,r,l,n,d){const u=(0,a.up)("AddCategory"),m=(0,a.up)("EditCategory");return(0,a.wg)(),(0,a.iD)("div",o,[s,i,(0,a._)("section",null,[(0,a._)("div",c,[(0,a.Wm)(u,{onCategoryAdded:d.updateCategories},null,8,["onCategoryAdded"]),((0,a.wg)(),(0,a.j4)(m,{categories:d.categories,key:n.updateCount},null,8,["categories"]))])])])}var n=r(9242),d=r(4870),u=r(3053),m=r(9117);const g={class:"create border border-success col-xl-5 col-lg-5 col-md-5 col-sm-5 bg-info flex-wrap m-2"},y={class:"p-2"},p=(0,a._)("div",{class:"mb-4"},[(0,a._)("h4",null,"Create")],-1),h=["onSubmit"],b={class:"form-floating mb-3"},f=(0,a._)("label",{for:"floatingName"},"Title",-1),v={class:"form-floating mb-3"},w=(0,a._)("label",{for:"floatingLimit"},"Limit",-1),_={key:0,class:"error"},C={key:0,type:"submit",class:"btn btn-success shadow-sm rounded mb-2"},S=(0,a.Uk)(" CREATE "),k=(0,a._)("i",{class:"bi bi-send float-end ms-2"},null,-1),L=[S,k];var N={setup(e){const t=(0,d.qj)({categoryName:"",categoryLimit:""}),r=(0,a.Fl)((()=>({categoryName:{required:m.C1},categoryLimit:{required:m.C1}}))),o=(0,u.Xw)(r,t);async function s(){if(this.v$.$invalid)for(let e of this.v$.$silentErrors)this.$toast.warning(e.$message);else await this.crmStore.setNewCategory({name:this.categoryName,limit:this.categoryLimit}).then((e=>{this.$toast.success(`Category ${e.newCategory.categoryName} added`),this.categoryName="",this.categoryLimit="",this.v$.$reset(),this.$emit("categoryAdded")}))}return(e,t)=>((0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("div",y,[p,(0,a._)("form",{onSubmit:(0,n.iM)(s,["prevent"])},[(0,a._)("div",b,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingName",placeholder:"Enter title","onUpdate:modelValue":t[0]||(t[0]=t=>e.categoryName=t)},null,512),[[n.nr,e.categoryName]]),f]),(0,a._)("div",v,[(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"floatingLimit",placeholder:"Limit",min:"1","onUpdate:modelValue":t[1]||(t[1]=t=>e.categoryLimit=t)},null,512),[[n.nr,e.categoryLimit]]),w,(0,d.SU)(o).categoryLimit.required?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",_,"Enter limit"))]),(0,d.SU)(o).$invalid?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",C,L))],40,h)])]))}};const $=N;var D=$,x=r(7139);const U={key:0,class:"edit border border-success col-xl-5 col-lg-5 col-md-5 col-sm-5 bg-light flex-wrap m-2"},E={class:"p-2"},q=(0,a._)("div",{class:"mb-4"},[(0,a._)("h4",null,"Edit")],-1),A={class:"mb-2"},V=(0,a._)("option",{disabled:""},"Categories:",-1),I=["value"],j=(0,a._)("label",{for:"selectCategory"},"Choose the category",-1),M={class:"mb-2"},O=["placeholder"],T={class:"mb-4"},J=["placeholder"],P={key:0,type:"submit",class:"btn btn-success shadow-sm rounded mb-2"},Y=(0,a.Uk)(" UPDATE "),Z=(0,a._)("i",{class:"bi bi-send float-end ms-2"},null,-1),z=[Y,Z],F={key:1,class:"text-center col-xl-5 col-lg-5 col-md-5 col-sm-5 flex-wrap"};function H(e,t,r,o,s,i){return r.categories?((0,a.wg)(),(0,a.iD)("div",U,[(0,a._)("div",E,[q,(0,a._)("form",{onSubmit:t[3]||(t[3]=(0,n.iM)(((...e)=>i.submit&&i.submit(...e)),["prevent"]))},[(0,a._)("div",A,[(0,a.wy)((0,a._)("select",{class:"form-select",id:"selectCategory","aria-label":"Default select example","onUpdate:modelValue":t[0]||(t[0]=e=>s.current=e)},[V,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.categories,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e},(0,x.zw)(e.categoryName),9,I)))),128))],512),[[n.bM,s.current]]),j]),(0,a._)("div",M,[(0,a.wy)((0,a._)("input",{type:"text",id:"name",placeholder:s.current.categoryName,"onUpdate:modelValue":t[1]||(t[1]=e=>s.current.categoryName=e)},null,8,O),[[n.nr,s.current.categoryName]])]),(0,a._)("div",T,[(0,a.wy)((0,a._)("input",{id:"limit",type:"number",placeholder:s.current.categoryLimit,"onUpdate:modelValue":t[2]||(t[2]=e=>s.current.categoryLimit=e)},null,8,J),[[n.nr,s.current.categoryLimit]])]),s.current.hasOwnProperty("categoryLimit")?((0,a.wg)(),(0,a.iD)("button",P,z)):(0,a.kq)("",!0)],32)])])):((0,a.wg)(),(0,a.iD)("p",F,"You didn't add categories"))}var K=r(5635),R={name:"edit-category",props:["categories"],setup(){const e=(0,K.S)();return{crmStore:e}},data(){return{current:{}}},methods:{submit(){try{this.crmStore.updateCategory(this.current),this.current={},this.$toast.success("Category updated!")}catch(e){this.$toast.warning(e.message)}}}},W=r(89);const X=(0,W.Z)(R,[["render",H]]);var B=X,G={name:"categories-component",setup(){const e=(0,K.S)();return{crmStore:e}},components:{AddCategory:D,EditCategory:B},data(){return{isLoaded:!0,updateCount:0}},methods:{updateCategories(){this.updateCount++,this.crmStore.categories=JSON.parse(localStorage.getItem("categories"))||[]}},computed:{categories(){return this.crmStore._userInfo.categories}},mounted(){this.updateCategories()},watch:{categories(){let e=JSON.parse(localStorage.getItem("userInfo"));this.crmStore.categories=e.categories}}};const Q=(0,W.Z)(G,[["render",l]]);var ee=Q}}]);
//# sourceMappingURL=Categories.vue.c4ec1714.js.map